{% extends 'base.html' %}

{% block title %}Task List{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-3">
        <h3>Sidebar</h3>
        <ul class="list-group">
            <li class="list-group-item"><a href="{% url 'todo:task-list' %}">Home</a></li>
            <li class="list-group-item"><a href="{% url 'todo:tag-list' %}">Tags</a></li>
        </ul>
    </div>
    <div class="col-md-9">
        <h1>TODO List</h1>
        <a href="{% url 'todo:task-add' %}" class="btn btn-primary mb-3">Add Task</a>
        <ul class="list-group">
            {% for task in tasks %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <div>
                        <strong>{{ task.content }}</strong> - 
                        {% if task.is_done %}
                            <span class="text-success">Done</span>
                        {% else %}
                            <span class="text-danger">Not done</span>
                        {% endif %}
                        <br>
                        Created: {{ task.created_at|date:"F j, Y, g:i a" }}
                        {% if task.deadline %}
                            <br>Deadline: {{ task.deadline|date:"F j, Y, g:i a" }}
                        {% endif %}
                        <br>Tags: {{ task.tags.all|join:", " }}
                    </div>
                    <div>
                        <a href="{% url 'todo:task-update' task.pk %}" class="btn btn-secondary">Update</a>
                        <a href="{% url 'todo:task-delete' task.pk %}" class="btn btn-danger">Delete</a>
                        {% if task.is_done %}
                            <a href="{% url 'todo:task-toggle' task.pk %}" class="btn btn-warning">Undo</a> <!-- Зміна тут -->
                        {% else %}
                            <a href="{% url 'todo:task-toggle' task.pk %}" class="btn btn-success">Complete</a> <!-- Зміна тут -->
                        {% endif %}
                    </div>
                </li>
            {% empty %}
                <li class="list-group-item">No tasks available.</li>
            {% endfor %}
        </ul>
    </div>
</div>
{% endblock %}
